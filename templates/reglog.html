{% extends "base.html" %}
{% block content %}
<div class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-orange-90 via-white to-orange-80 py-12 px-4">

  <!-- Logo and Back Button -->
  <div class="w-full max-w-6xl flex justify-between items-center mb-8">
    <a href="{{ url_for('index') }}" class="flex items-center space-x-3 text-gray-600 hover:text-orange-600 transition">
      <i class="fas fa-arrow-left text-xl"></i>
      <span class="font-medium">Back to Home</span>
    </a>
    <div class="flex items-center space-x-3">
      <div class="w-10 h-10 bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg flex items-center justify-center">
        <i class="fas fa-chart-line text-white text-xl"></i>
      </div>
      <span class="text-2xl font-bold text-gray-800">Inventra</span>
    </div>
  </div>

  <!-- Main Card -->
  <div class="bg-gray-200 rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-w-6xl w-full">
    
    
    <div class="hidden md:flex md:w-1/2 bg-gradient-to-br from-orange-500 to-orange-600 relative overflow-hidden">
      
      <div class="absolute inset-0">
        <img src="{{ url_for('static', filename='images/login.jpg') }}" 
             alt="Inventory Management" 
             class="w-full h-full object-cover opacity-50"
             onerror="this.style.display='none'">
        <div class="absolute inset-0 bg-gradient-to-br from-orange-600 to-orange-400 opacity-90"></div>
      </div>
      
      
      <div class="relative z-10 p-12 flex flex-col justify-between text-white">
        <div>
          <div class="flex items-center space-x-3 mb-6">
            <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
              <i class="fas fa-chart-line text-orange-600 text-2xl"></i>
            </div>
            <span class="text-3xl font-bold">Inventra</span>
          </div>
          
          <h2 class="text-4xl font-bold mb-4 leading-tight">Transform Your Business Management</h2>
          <p class="text-xl text-orange-100 mb-8">
            Join hundreds of businesses using Inventra to streamline operations and boost sales
          </p>
          
          <div class="space-y-4">
            <div class="flex items-start space-x-4 bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
              <div class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fas fa-boxes text-2xl"></i>
              </div>
              <div>
                <h3 class="font-bold text-lg mb-1">Real-Time Inventory</h3>
                <p class="text-orange-100 text-sm">Track every product with instant updates and low stock alerts</p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4 bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
              <div class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fas fa-cash-register text-2xl"></i>
              </div>
              <div>
                <h3 class="font-bold text-lg mb-1">Fast POS System</h3>
                <p class="text-orange-100 text-sm">Complete sales in seconds with our intuitive interface</p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4 bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
              <div class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fas fa-chart-line text-2xl"></i>
              </div>
              <div>
                <h3 class="font-bold text-lg mb-1">Powerful Analytics</h3>
                <p class="text-orange-100 text-sm">Get insights that drive better business decisions</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-8">
          <div class="bg-white bg-opacity-15 backdrop-blur-sm rounded-xl p-5 border border-white border-opacity-20">
            <div class="flex items-start space-x-3 mb-3">
              <i class="fas fa-quote-left text-2xl text-orange-200"></i>
              <p class="text-sm italic leading-relaxed">"Inventra transformed how we manage our inventory. The real-time tracking and analytics helped us reduce costs by 30%. Highly recommended!"</p>
            </div>
            <div class="flex items-center space-x-3 ml-8">
              <div class="w-10 h-10 bg-white bg-opacity-30 rounded-full flex items-center justify-center">
                <i class="fas fa-user text-orange-600"></i>
              </div>
              <div>
                <p class="font-semibold text-sm">Sarah Johnson</p>
                <p class="text-xs text-orange-200">Store Manager, TechMart Kenya</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Forms -->
    <div class="w-full md:w-1/2 p-8 md:p-12">
      
      <!-- Tab Buttons -->
      <div class="flex mb-8 bg-gray-100 rounded-lg p-1">
        <button id="loginTab" class="flex-1 py-3 text-base font-semibold rounded-md bg-white text-orange-600 shadow-sm transition-all">
          Login
        </button>
        <button id="registerTab" class="flex-1 py-3 text-base font-semibold rounded-md bg-transparent text-gray-600 transition-all">
          Register
        </button>
      </div>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="p-4 mb-6 rounded-lg flex items-center
              {% if category == 'success' %}bg-green-50 border border-green-200 text-green-800
              {% elif category == 'danger' %}bg-red-50 border border-red-200 text-red-800
              {% elif category == 'warning' %}bg-yellow-50 border border-yellow-200 text-yellow-800
              {% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %}">
              <i class="fas 
                {% if category == 'success' %}fa-check-circle
                {% elif category == 'danger' %}fa-exclamation-circle
                {% elif category == 'warning' %}fa-exclamation-triangle
                {% else %}fa-info-circle{% endif %} mr-3"></i>
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- LOGIN FORM -->
      <form id="loginForm" method="POST" action="{{ url_for('login') }}" class="space-y-5">
        <div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Welcome Back!</h2>
          <p class="text-gray-600 mb-6">Login to access your dashboard</p>
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">
            <i class="fas fa-user mr-2 text-gray-400"></i>Username
          </label>
          <input type="text" name="username" required 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            placeholder="Enter your username">
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">
            <i class="fas fa-lock mr-2 text-gray-400"></i>Password
          </label>
          <input type="password" name="password" required 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            placeholder="Enter your password">
        </div>

        <div class="flex items-center justify-between text-sm">
          <label class="flex items-center">
            <input type="checkbox" class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
            <span class="ml-2 text-gray-600">Remember me</span>
          </label>
          <a href="#" class="text-orange-600 hover:text-orange-700 font-medium">Forgot password?</a>
        </div>

        <button type="submit" 
          class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg">
          Login to Dashboard
        </button>

        <p class="text-center text-sm text-gray-600 mt-4">
          Don't have an account? 
          <a href="#" id="switchToRegister" class="text-orange-600 hover:text-orange-700 font-semibold">Create one now</a>
        </p>
      </form>

      <!-- REGISTER FORM -->
      <form id="registerForm" method="POST" action="{{ url_for('register') }}" class="hidden space-y-5">
        <div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Create Account</h2>
          <p class="text-gray-600 mb-6">Join Inventra and start managing your inventory</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">
              <i class="fas fa-user mr-2 text-gray-400"></i>Username *
            </label>
            <input type="text" name="username" required 
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
              placeholder="Choose username">
          </div>

          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">
              <i class="fas fa-envelope mr-2 text-gray-400"></i>Email *
            </label>
            <input type="email" name="email" required 
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
              placeholder="your@email.com">
          </div>
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">
            <i class="fas fa-lock mr-2 text-gray-400"></i>Password *
          </label>
          <input type="password" name="password" required 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            placeholder="Create a strong password">
          <p class="text-xs text-gray-500 mt-1">Must be at least 8 characters</p>
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">
            <i class="fas fa-lock mr-2 text-gray-400"></i>Confirm Password *
          </label>
          <input type="password" name="confirm_password" required 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            placeholder="Confirm your password">
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">
            <i class="fas fa-user-tag mr-2 text-gray-400"></i>Account Type *
          </label>
          <select name="role" 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition bg-white">
            <option value="">Select your role</option>
            <option value="admin">Admin</option>
            <option value="manager">Inventory Manager</option>
            <option value="cashier">Cashier</option>
            <option value="supplier">Supplier</option>
          </select>
        </div>

        <div class="flex items-start">
          <input type="checkbox" required class="w-4 h-4 mt-1 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
          <label class="ml-2 text-sm text-gray-600">
            I agree to the <a href="#" class="text-orange-600 hover:text-orange-700 font-medium">Terms of Service</a> and <a href="#" class="text-orange-600 hover:text-orange-700 font-medium">Privacy Policy</a>
          </label>
        </div>

        <button type="submit" 
          class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg">
          Create Account
        </button>

        <p class="text-center text-sm text-gray-600 mt-4">
          Already have an account? 
          <a href="#" id="switchToLogin" class="text-orange-600 hover:text-orange-700 font-semibold">Login here</a>
        </p>
      </form>
    </div>
  </div>

  <!-- Trust Badges -->
  <!-- <div class="mt-8 flex flex-wrap justify-center items-center gap-8 text-gray-500 text-sm">
    <div class="flex items-center space-x-2">
      <i class="fas fa-shield-alt text-green-600"></i>
      <span>Secure & Encrypted</span>
    </div>
    <div class="flex items-center space-x-2">
      <i class="fas fa-clock text-blue-600"></i>
      <span>24/7 Support</span>
    </div>
    <div class="flex items-center space-x-2">
      <i class="fas fa-users text-purple-600"></i>
      <span>500+ Active Users</span>
    </div>
  </div>
</div> -->

<!-- Tab Switching Script -->
<script>
  const loginTab = document.getElementById('loginTab');
  const registerTab = document.getElementById('registerTab');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');
  const switchToRegister = document.getElementById('switchToRegister');
  const switchToLogin = document.getElementById('switchToLogin');

  function showLogin() {
    loginForm.classList.remove('hidden');
    registerForm.classList.add('hidden');
    loginTab.classList.add('bg-white', 'text-orange-600', 'shadow-sm');
    loginTab.classList.remove('bg-transparent', 'text-gray-600');
    registerTab.classList.remove('bg-white', 'text-orange-600', 'shadow-sm');
    registerTab.classList.add('bg-transparent', 'text-gray-600');
  }

  function showRegister() {
    registerForm.classList.remove('hidden');
    loginForm.classList.add('hidden');
    registerTab.classList.add('bg-white', 'text-orange-600', 'shadow-sm');
    registerTab.classList.remove('bg-transparent', 'text-gray-600');
    loginTab.classList.remove('bg-white', 'text-orange-600', 'shadow-sm');
    loginTab.classList.add('bg-transparent', 'text-gray-600');
  }

  loginTab.addEventListener('click', showLogin);
  registerTab.addEventListener('click', showRegister);
  switchToRegister.addEventListener('click', (e) => { e.preventDefault(); showRegister(); });
  switchToLogin.addEventListener('click', (e) => { e.preventDefault(); showLogin(); });

  // Form validation
  document.getElementById('registerForm').addEventListener('submit', function(e) {
    const password = this.querySelector('[name="password"]').value;
    const confirmPassword = this.querySelector('[name="confirm_password"]').value;
    const role = this.querySelector('[name="role"]').value;

    if (password.length < 8) {
      e.preventDefault();
      alert('Password must be at least 8 characters long');
      return;
    }

    if (password !== confirmPassword) {
      e.preventDefault();
      alert('Passwords do not match');
      return;
    }

    if (!role) {
      e.preventDefault();
      alert('Please select an account type');
      return;
    }
  });
</script>
{% endblock %}